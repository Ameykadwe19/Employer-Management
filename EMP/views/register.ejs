<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Register</title>
    <!-- Bootstrap CSS CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      ::-webkit-scrollbar {
  width: 8px; /* slim width */
}
::-webkit-scrollbar-track {
  background: transparent; /* no background */
}
::-webkit-scrollbar-thumb {
  background-color: #0d6efd; /* blue color */
  border-radius: 10px;
  border: 2px solid transparent; /* gives space around thumb */
  background-clip: content-box;
}

/* Firefox */
body {
  scrollbar-width: thin;
  scrollbar-color: #0d6efd transparent;
}
      body {
        background-color: #000;
        color: #ccc;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      main {
        flex-grow: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 1.5rem;
        position: relative; /* for absolute children */
      }
      .card {
        background-color: #000;
        border-color: #444;
        border-radius: 0.5rem;
        box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.75);
        width: 100%;
        max-width: 400px;
        padding: 2rem;
        position: relative;
        z-index: 1; /* above background circles */
      }
      .form-control {
        background-color: #fff;
        color: #000;
        border: 1px solid #444;
      }
      .form-control:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        background-color: #fff;
        color: #000;
      }
      .btn-primary {
        background-color: #0d6efd;
        border-color: #0d6efd;
      }
      .btn-primary:hover {
        background-color: #0b5ed7;
        border-color: #0a58ca;
      }
      .btn-outline-light {
        color: #ccc;
        border-color: #666;
      }
      .btn-outline-light:hover {
        color: #0d6efd;
        border-color: #0d6efd;
      }
      footer {
        padding: 1rem 0;
        color: #777;
        text-align: center;
        font-size: 0.875rem;
      }
      a:hover {
        text-decoration: underline;
      }
      .error-message {
        color: #dc3545;
        margin-bottom: 10px;
      }

      /* Bouncing animation */
      @keyframes bounce {
        0%, 100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      /* Background circles container */
      .background-circles {
        position: absolute;
        top: 20%;
        left: 50%;
        transform: translateX(-50%);
        pointer-events: none;
        z-index: 0;
        width: 300px;
        height: 150px;
        overflow: visible;
      }
      .background-circles span {
        position: absolute;
        border-radius: 50%;
        opacity: 0.5;
        filter: drop-shadow(0 0 5px);
        animation: bounce 2.5s infinite;
      }
      .circle1 {
        top: 40px;
        left: 0;
        width: 72px;
        height: 72px;
        background-color: #0d6efd;
        opacity: 0.6;
        filter: drop-shadow(0 0 6px #0d6efd88);
        animation-delay: 0s;
      }
      .circle2 {
        top: 30px;
        left: 110px;
        width: 72px;
        height: 72px;
        background-color: #0a58ca;
        opacity: 0.5;
        filter: drop-shadow(0 0 5px #0a58ca88);
        animation-delay: 0.5s;
      }
      .circle3 {
        top: 50px;
        left: 220px;
        width: 72px;
        height: 72px;
        background-color: #084298;
        opacity: 0.4;
        filter: drop-shadow(0 0 4px #08429888);
        animation-delay: 1s;
      }
    </style>
  </head>
  <body>
    <main>
      <!-- Background bouncing circles -->
      <div class="background-circles" aria-hidden="true">
        <span class="circle1"></span>
        <span class="circle2"></span>
        <span class="circle3"></span>
      </div>

      <div class="card">
        <h2
          class="text-center mb-4"
          style="color: white; font-weight: 700; font-size: 2rem"
        >
          Register
        </h2>

        <form id="registerForm" method="POST" action="/register" class="mb-3">
          <% if (error) { %>
          <div class="error-message"><%= error %></div>
          <% } %>

          <div class="mb-3">
            <label for="name" class="form-label fw-semibold text-white">Name</label>
            <input
              id="name"
              name="name"
              type="text"
               autocomplete="name"
              required
              placeholder="Your full name"
              class="form-control"
            />
          </div>

          <div class="mb-3">
            <label for="email" class="form-label fw-semibold text-white">Email</label>
            <input
              id="email"
              name="username"
              type="email"
               autocomplete="email"
              required
              placeholder="you@example.com"
              class="form-control"
            />
          </div>

          <div class="mb-3">
            <label for="password" class="form-label fw-semibold text-white"
              >Password</label
            >
            <input
              id="password"
              name="password"
              type="password"
              required
              placeholder="Enter your password"
              class="form-control"
            />
          </div>

          <div class="mb-4">
            <label for="confirmPassword" class="form-label fw-semibold text-white">
              Confirm Password
            </label>
            <input
              id="confirmPassword"
              name="confirmPassword"
              type="password"
              required
              placeholder="Re-enter your password"
              class="form-control"
            />
          </div>

          <button type="submit" class="btn btn-primary w-100 fw-semibold py-2">
            Register
          </button>
        </form>

        <div class="text-center mt-4 mb-3 text-secondary">OR</div>

        <a
          href="/auth/google"
          class="btn btn-outline-light w-100 d-flex align-items-center justify-content-center gap-2"
        >
          <svg
            class="bi bi-google"
            width="24"
            height="24"
            fill="currentColor"
            viewBox="0 0 533.5 544.3"
            xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="xMidYMid"
          >
            <path
              fill="#4285F4"
              d="M533.5 278.4c0-18.4-1.5-36.1-4.3-53.3H272v100.8h146.9c-6.3 34.1-25.4 63-54.1 82.5v68.4h87.4c51.1-47.1 80.3-116.5 80.3-198.4z"
            />
            <path
              fill="#34A853"
              d="M272 544.3c73.5 0 135.3-24.3 180.4-65.9l-87.4-68.4c-24.3 16.3-55.3 25.9-93 25.9-71.4 0-131.9-48.2-153.5-113.1H29.9v70.9c45.1 88.9 137 150.6 242.1 150.6z"
            />
            <path
              fill="#FBBC04"
              d="M118.5 323.8c-5.4-16-8.5-33-8.5-50.4s3.1-34.4 8.5-50.4v-70.9H29.9C11.2 196.7 0 232.5 0 269.4s11.2 72.7 29.9 107.1l88.6-52.7z"
            />
            <path
              fill="#EA4335"
              d="M272 107.3c39.8 0 75.5 13.7 103.7 40.7l77.8-77.8C399.6 24.7 342.4 0 272 0 167 0 75.1 61.7 29.9 150.6l88.6 52.7c21.6-64.9 82.1-113.1 153.5-113.1z"
            />
          </svg>
          <span>Continue with Google</span>
        </a>

        <p class="mt-4 text-center text-secondary">
          Already have an account?
          <a href="/login" class="text-primary">Login here</a>
        </p>
      </div>
    </main>
<footer class="bg-black text-white py-3 fade-in-up" style="animation-delay: 2s;">
  <div class="container text-center small" style="font-size: 0.8rem; color: #ccc;">
    &copy; <%= new Date().getFullYear() %> Amey Kadwe. All rights reserved.
  </div>
</footer>

    <script>
      const form = document.getElementById("registerForm");

      form.addEventListener("submit", function (e) {
        const password = form.password.value;
        const confirmPassword = form.confirmPassword.value;

        // Password validation regex:
        // Minimum 8 chars, at least 1 uppercase, 1 number, 1 special char
        const passwordPattern =
          /^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_\-+=~`[\]{}|\\:;"'<>,.?/]).{8,}$/;

        if (!passwordPattern.test(password)) {
          e.preventDefault();
          alert(
            "Password must be minimum 8 characters, include at least one uppercase letter, one number, and one special character."
          );
          return;
        }

        if (password !== confirmPassword) {
          e.preventDefault();
          alert("Passwords do not match.");
          return;
        }
      });
    </script>

    <!-- Bootstrap JS Bundle -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    ></script>
  </body>
</html>
